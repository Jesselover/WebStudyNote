## 1. 项目搭建+使用element实现首页布局
### 1.初始化
1. 安装 `element ui`,`less`,`babel-plugin-component`
```js
	npm i element-ui -S
	npm install babel-plugin-component -D //4.  安装 babel-plugin-component 插件，已达到减小项目体积的目的。D 开发依赖
	npm i less
	npm i less-loader@6.0.0
```

2. 按需引入
3. 配置路由
```JS
	npm i vue-router@3
// 必须使用此版本，不然会出现版本不兼容问题
```
### 2.菜单实现
1. 数据
2. 数据清洗：computed计算属性+array.filter 过滤出新数组
3. 菜单展示：v-for 对于二级菜单，还要v-for他的子菜单
4. 采用编程式路由导航---路由配置：添加点击事件，进行路由的跳转
#### 1. 一级菜单实现
 2. 在计算属性 computed 中定义函数 `noChildren()`，过滤出没有子级的一级菜单
```js
	noChildren() {
	  //过滤出来没有子项目的数据
      return this.menu.filter((item) => !item.children);
    }

```
3.  v-for 遍历过滤出来的一级菜单，并在相应位置做出呈现
```html
	<el-menu-item v-for="item in noChildren" :index="item.path" :key="item.path">
      <i :class="'el-icon-' + item.icon"></i>
      <span slot="title">{{item.label}}</span>
    </el-menu-item>

```
#### 2.二级菜单的实现
1.  在计算属性 computed 中定义函数 `hasChildren()`，过滤出有子级的菜单
```js
	hasChildren() {
	  //过滤出来有子项目的数据
      return this.menu.filter((item) => item.children);
    }

```
2.  v-for 遍历过滤出来的二级菜单，并在相应位置做出呈现
```html
	<el-submenu v-for="item in hasChildren" :index="item.path" :key="item.path">
      <template slot="title">
        <i :class="'el-icon-' + item.icon"></i>
        <span slot="title">{{item.label}}</span>
      </template>
      <!-- 二级菜单 -->
      <el-menu-item-group v-for="(subItem, subIndex) in item.children" :index="subIndex" :key="subItem.path">
        <el-menu-item >{{subItem.label}}</el-menu-item>
      </el-menu-item-group>
    </el-submenu>

```
#### 3. 路由配置 
采用编程式路由导航
路由配置：添加点击事件，进行路由的跳转
## 2. 顶部导航菜单及与左侧导航联动的面包屑实现

## 3. 封装一个ECharts组件

## 4. 封装一个Form表单组件和Table表格组件

## 5. 企业开发之权限管理思路讲解
#### 1. elementui表单的 `el-form ` 中配置`rules`; `el-item` 中`type:password/input `
```js
	      rules: {
	        username: [
	          // 用户名校验：必需、没有输入会有提示、失去焦点触发
	          { required: true, message: "请输入用户名", trigger: "blur" },
	          {
	            min: 3,
	            message: "用户名长度不能小于3位",
	            trigger: "blur",
	          },
	        ],
	        // 密码校验：必需、提示、失去焦点触发
	        password: [{ required: true, message: "请输入密码", trigger: "blur" }],
	      },
```

#### 2. 登录权限 & 导航守卫
1. 安装cookie `	npm i js-cookie
2. 再store中创建user.js;引入cookie，缓存输入内容
	1. 在mutation中封装关于cookie的方法
	2. 再store/index中引入user.js
3. 在main.js中添加前置陆游守卫%%拿到token并存在vuex中；const一个token（来自vuex）存一下，防止页面刷新后vuex丢失token信息；判断token存在否、在登录页否。如果不存在且不在登录页，返回登录页%%
```js
	// 前置路由守卫
	router.beforeEach((to, from, next) => {
	  store.commit('getToken') 
	  //防止页面刷新后vuex丢失token信息
	  const token = store.state.user.token
	  // 如果token不存在，并且当前页不是登录页
	  if(!token && to.name !== 'login') {
	    next({name: 'login'}) // 返回登录页
	  } else if(token && to.name === 'login'){
	    next({name: 'home'})
	  } else {
	    next()
	  }
	})

```

#### 3.登录接口与菜单权限
1. mock 数据 。用json传递数据，不同用户返回不同token，渲染不同菜单
2. 动态路由：
	1. tab.js中menu为空数组
	2. 在 tab.js 的 mutations 中添加修改菜单方法。遍历菜单，给每一项谭家component组件，存在menuArray数组中。遍历此数组，动态添加路由（ router.addRoute('Main', item)）
```js
	setMenu(state, val) {
      state.menu = val
      Cookie.set('menu', JSON.stringify(val))
    },
    clearMenu(state) {
      state.menu = []
      Cookie.remove('menu')
    },
    addMenu(state, router) {
      if(!Cookie.get('menu')) {
        return 
      }
      // 转成对象
      const menu = JSON.parse(Cookie.get('menu'))
      state.menu = menu
      const menuArray = []
      menu.forEach(item => {
        // 有二级菜单的数据
        if(item.children) {
          item.children = item.children.map(item => {
            item.component = () => import(`../views/${item.url}`)
            return item
          })
          menuArray.push(...item.children)
          // 一级菜单
        }else{
          item.component = () => import(`../views/${item.url}`)
          menuArray.push(item)
        }
      })
      // 路由的动态添加
      menuArray.forEach(item => {
        router.addRoute('Main', item)
        // 替换或添加袁勇路由
      })
    }

```

3. login.vue
```js
	login() {
      getMenu(this.form).then((res) => {
        console.log(res, "res");
        // 接口调用成功
        if (res.code === 20000) {
          // 登录成功后，清除当前路由
          this.$store.commit("clearMenu");
          // 设置路由，传入数据
          this.$store.commit("setMenu", res.data.menu);
          // 设置token，传入接口的数据
          this.$store.commit("setToken", res.data.token);
          // 动态添加路由，传入router 实例
          this.$store.commit("addMenu", this.$router); 
          // 页面跳转
          this.$router.push({ name: "home" });
        } else {
          //失败的提示
          this.$message.warning(res.data.message);
        }
      });
    }

```

4.  在 CommonAside.vue 中定义 asyncMenu()，用来获取 menu
```js
	computed: {
	    noChildren() {
	      // 过滤出来没有子项目的数据
	      return this.asyncMenu.filter((item) => !item.children);
	    },
	    hasChildren() {
	      // 过滤出有子项目的数据
	      return this.asyncMenu.filter((item) => item.children);
	    },
	    isCollapse() {
	      return this.$store.state.tab.isCollapse;
	    },
	    asyncMenu() {
	      // 获取menu
	      return this.$store.state.tab.menu
	    }
	  }

```


## 6.问题
1. 刷新白屏
	main.js 中，在 vue实例生成前， created 钩子中调用动态路由的
```js
	created() {
      store.commit('addMenu', router)
    }

```

2. 登陆后，应该无法再访问登录页。添加全局路由守卫。如果有token，而且next是login，则跳转到home首页
3. 退出功能
```js
	logOut() {
      this.$store.commit("clearToken"); //清除token
      this.$store.commit("clearMenu"); //清除menu
      this.$router.push("/login"); //跳转到登录界面
    }

```